:8080 {
    # API and WebSocket routes to backend
    # Match all variations of /_event path
    @eventPath {
        path /_event
        path /_event/
        path /_event/*
    }
    handle @eventPath {
        reverse_proxy localhost:8000
    }
    
    handle /ping {
        reverse_proxy localhost:8000
    }
    
    @uploadPath {
        path /_upload
        path /_upload/
        path /_upload/*
    }
    handle @uploadPath {
        reverse_proxy localhost:8000
    }
    
    # Static files
    handle {
        root * /app/.web/_static
        try_files {path} {path}/ /index.html
        file_server
    }
}
